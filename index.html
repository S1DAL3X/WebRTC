<!DOCTYPE html>
<html>
<head><title>WebRTC - my Web RTC app.</title>
  <style>
    video { height: 240px; width: 320px; border: 1px solid grey; }
  </style>
</head>
<body>
  <p>Hello World!</p>
  <button id="btn_getUserMedia" onclick="getUserMedia_click()">getUserMedia</button>
  <br>
  <video id="localVideo1" autoplay="true"></video>
  <script>
	var localStream = null;
	var streamConstraints = { "audio": true, "video": true}; // Запрашиваем доступ и к аудио, и к видео
	function getUserMedia_success(stream) {
  console.log("getUserMedia_success():", stream);

  videoTrack = stream.getVideoTracks();
  window.stream = stream;
  localVideo1.srcObject = stream;

  //localVideo1.autoplay = true;
  //localVideo1.src = URL.createObjectURL(stream); // Подключаем медиапоток к HTML-элементу <video>
  //localStream = stream; // и сохраняем в глобальной переменной для дальнейшего использования
}
	function getUserMedia_error(error) {
  console.log("getUserMedia_error():", error);
}
	function getUserMedia_click() {
  console.log("getUserMedia_click()");
  navigator.webkitGetUserMedia(
    streamConstraints,
    getUserMedia_success,
    getUserMedia_error
  );
}
  </script>
</body>
</html>
